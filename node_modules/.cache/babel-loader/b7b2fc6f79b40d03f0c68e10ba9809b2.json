{"ast":null,"code":"import{PreloaderStoreAction}from\"../../store/preloader-store\";import{useEffect}from\"react\";var timeout=0;var MAX_PRELOADER_LIFE_TIME=5000;export var usePreloader=function usePreloader(preloaderDispatch){useEffect(function(){preloaderDispatch({type:PreloaderStoreAction.SET_SAFE_SRR_LOADED_RESOURCE,payload:Array.from(document.querySelectorAll('img')).filter(function(img){return img.hasAttribute('data-render');}).length+Array.from(document.querySelectorAll('div')).filter(function(div){return div.hasAttribute('data-render');}).length});timeout=window.setTimeout(function(){preloaderDispatch({type:PreloaderStoreAction.SET_SAFE_SRR_LOADED_RESOURCE,payload:0});},MAX_PRELOADER_LIFE_TIME);return function(){clearTimeout(timeout);};},[]);};","map":{"version":3,"sources":["/home/businka/Рабочий стол/portfolio/portfolio/src/hooks/use-preloading/index.ts"],"names":["PreloaderStoreAction","useEffect","timeout","MAX_PRELOADER_LIFE_TIME","usePreloader","preloaderDispatch","type","SET_SAFE_SRR_LOADED_RESOURCE","payload","Array","from","document","querySelectorAll","filter","img","hasAttribute","length","div","window","setTimeout","clearTimeout"],"mappings":"AAAA,OAAwBA,oBAAxB,KAAmD,6BAAnD,CACA,OAAeC,SAAf,KAA+B,OAA/B,CAEA,GAAIC,CAAAA,OAAO,CAAG,CAAd,CACA,GAAMC,CAAAA,uBAAuB,CAAG,IAAhC,CACA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,iBAAD,CAAwD,CAEhFJ,SAAS,CAAC,UAAM,CAEZI,iBAAiB,CAAC,CAACC,IAAI,CAAEN,oBAAoB,CAACO,4BAA5B,CAA0DC,OAAO,CAC3EC,KAAK,CAACC,IAAN,CAAWC,QAAQ,CAACC,gBAAT,CAA0B,KAA1B,CAAX,EAA6CC,MAA7C,CAAoD,SAAAC,GAAG,QACnDA,CAAAA,GAAG,CAACC,YAAJ,CAAiB,aAAjB,CADmD,EAAvD,EAEEC,MAFF,CAGAP,KAAK,CAACC,IAAN,CAAWC,QAAQ,CAACC,gBAAT,CAA0B,KAA1B,CAAX,EAA6CC,MAA7C,CAAoD,SAAAI,GAAG,QACnDA,CAAAA,GAAG,CAACF,YAAJ,CAAiB,aAAjB,CADmD,EAAvD,EAEEC,MANQ,CAAD,CAAjB,CAQAd,OAAO,CAAGgB,MAAM,CAACC,UAAP,CAAkB,UAAM,CAC9Bd,iBAAiB,CAAC,CAACC,IAAI,CAAEN,oBAAoB,CAACO,4BAA5B,CAA0DC,OAAO,CAAE,CAAnE,CAAD,CAAjB,CACH,CAFS,CAEPL,uBAFO,CAAV,CAKA,MAAO,WAAM,CACTiB,YAAY,CAAClB,OAAD,CAAZ,CACH,CAFD,CAIH,CAnBQ,CAmBN,EAnBM,CAAT,CAoBH,CAtBM","sourcesContent":["import {IPreloadAction, PreloaderStoreAction} from \"../../store/preloader-store\";\nimport React, {useEffect} from \"react\";\n\nlet timeout = 0;\nconst MAX_PRELOADER_LIFE_TIME = 5000\nexport const usePreloader = (preloaderDispatch: React.Dispatch<IPreloadAction> ) => {\n\n    useEffect(() => {\n\n        preloaderDispatch({type: PreloaderStoreAction.SET_SAFE_SRR_LOADED_RESOURCE, payload:\n                Array.from(document.querySelectorAll('img')).filter(img =>\n                    img.hasAttribute('data-render')\n                ).length +\n                Array.from(document.querySelectorAll('div')).filter(div =>\n                    div.hasAttribute('data-render')\n                ).length})\n\n        timeout = window.setTimeout(() => {\n            preloaderDispatch({type: PreloaderStoreAction.SET_SAFE_SRR_LOADED_RESOURCE, payload: 0})\n        }, MAX_PRELOADER_LIFE_TIME);\n\n\n        return () => {\n            clearTimeout(timeout);\n        }\n\n    }, [])\n}"]},"metadata":{},"sourceType":"module"}