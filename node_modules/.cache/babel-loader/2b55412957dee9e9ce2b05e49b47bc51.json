{"ast":null,"code":"import styles from'./style.module.scss';import React,{useEffect,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var max_screen_main=0;var max_viewport=0;export var ProgressScroll=function ProgressScroll(_ref){var mainRef=_ref.mainRef;var progressScrollRef=useRef(null);var progressHandler=function progressHandler(){if(!mainRef.current)return;var mainElement=mainRef.current;if(max_screen_main===0||max_viewport===0){max_screen_main=mainElement.getBoundingClientRect().height;max_viewport=document.documentElement.clientHeight;}var current_position=mainElement.getBoundingClientRect().top;var current_scroll_position=-current_position+max_viewport;if(-current_position<=200){requestAnimationFrame(function(){if(progressScrollRef.current){progressScrollRef.current.style.width='0px';}});}else{var percent=current_scroll_position*100/max_screen_main;requestAnimationFrame(function(){if(progressScrollRef.current){progressScrollRef.current.style.width=percent+\"%\";}});}};useEffect(function(){window.addEventListener(\"scroll\",progressHandler);return function(){return window.removeEventListener('scroll',progressHandler);};},[]);return/*#__PURE__*/_jsx(\"div\",{className:styles.progress_scroll,ref:progressScrollRef});};","map":{"version":3,"sources":["/home/businka/Рабочий стол/portfolio/portfolio/src/components/progress-scroll/index.tsx"],"names":["styles","React","useEffect","useRef","max_screen_main","max_viewport","ProgressScroll","mainRef","progressScrollRef","progressHandler","current","mainElement","getBoundingClientRect","height","document","documentElement","clientHeight","current_position","top","current_scroll_position","requestAnimationFrame","style","width","percent","window","addEventListener","removeEventListener","progress_scroll"],"mappings":"AACA,MAAOA,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,MAA1B,KAAuC,OAAvC,C,2CAEA,GAAIC,CAAAA,eAAuB,CAAG,CAA9B,CACA,GAAIC,CAAAA,YAAoB,CAAG,CAA3B,CAEA,MAAO,IAAMC,CAAAA,cAAkF,CAAG,QAArFA,CAAAA,cAAqF,MAAe,IAAbC,CAAAA,OAAa,MAAbA,OAAa,CAE7G,GAAMC,CAAAA,iBAAiB,CAAGL,MAAM,CAAiB,IAAjB,CAAhC,CAEA,GAAOM,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAO,CAC5B,GAAG,CAACF,OAAO,CAACG,OAAZ,CAAqB,OACrB,GAAMC,CAAAA,WAAW,CAAGJ,OAAO,CAACG,OAA5B,CACA,GAAIN,eAAe,GAAK,CAApB,EAAyBC,YAAY,GAAK,CAA9C,CAAiD,CAE7CD,eAAe,CAAGO,WAAW,CAACC,qBAAZ,GAAoCC,MAAtD,CACAR,YAAY,CAAGS,QAAQ,CAACC,eAAT,CAAyBC,YAAxC,CACH,CAED,GAAMC,CAAAA,gBAAgB,CAAGN,WAAW,CAACC,qBAAZ,GAAoCM,GAA7D,CAEA,GAAMC,CAAAA,uBAAuB,CAAG,CAACF,gBAAD,CAAoBZ,YAApD,CAEA,GAAI,CAACY,gBAAD,EAAqB,GAAzB,CAA8B,CAC1BG,qBAAqB,CAAC,UAAM,CACxB,GAAGZ,iBAAiB,CAACE,OAArB,CAA8B,CAC1BF,iBAAiB,CAACE,OAAlB,CAA0BW,KAA1B,CAAgCC,KAAhC,CAAwC,KAAxC,CAEH,CACJ,CALoB,CAArB,CAOH,CARD,IAQO,CACH,GAAMC,CAAAA,OAAO,CAAIJ,uBAAuB,CAAG,GAA3B,CAAkCf,eAAlD,CAEAgB,qBAAqB,CAAC,UAAM,CACxB,GAAGZ,iBAAiB,CAACE,OAArB,CAA8B,CAC1BF,iBAAiB,CAACE,OAAlB,CAA0BW,KAA1B,CAAgCC,KAAhC,CAAwCC,OAAO,CAAG,GAAlD,CAEH,CACJ,CALoB,CAArB,CAOH,CACJ,CAhCD,CAkCArB,SAAS,CAAC,UAAM,CACZsB,MAAM,CAACC,gBAAP,CAAwB,QAAxB,CAAkChB,eAAlC,EACA,MAAO,kBAAMe,CAAAA,MAAM,CAACE,mBAAP,CAA2B,QAA3B,CAAqCjB,eAArC,CAAN,EAAP,CACH,CAHQ,CAGN,EAHM,CAAT,CAKA,mBAAO,YAAK,SAAS,CAAET,MAAM,CAAC2B,eAAvB,CAAwC,GAAG,CAAEnB,iBAA7C,EAAP,CACH,CA5CM","sourcesContent":["\nimport styles from './style.module.scss';\nimport React, {useEffect, useRef} from \"react\";\n\nlet max_screen_main: number = 0;\nlet max_viewport: number = 0;\n\nexport const ProgressScroll: React.FC<{mainRef: React.MutableRefObject<HTMLDivElement | null>}> = ({mainRef}) => {\n\n    const progressScrollRef = useRef<HTMLDivElement>(null);\n\n    const  progressHandler = () =>  {\n        if(!mainRef.current) return;\n        const mainElement = mainRef.current;\n        if (max_screen_main === 0 || max_viewport === 0) {\n\n            max_screen_main = mainElement.getBoundingClientRect().height;\n            max_viewport = document.documentElement.clientHeight;\n        }\n\n        const current_position = mainElement.getBoundingClientRect().top;\n\n        const current_scroll_position = -current_position + max_viewport;\n\n        if (-current_position <= 200) {\n            requestAnimationFrame(() => {\n                if(progressScrollRef.current) {\n                    progressScrollRef.current.style.width = '0px';\n\n                }\n            })\n\n        } else {\n            const percent = (current_scroll_position * 100) / max_screen_main;\n\n            requestAnimationFrame(() => {\n                if(progressScrollRef.current) {\n                    progressScrollRef.current.style.width = percent + \"%\";\n\n                }\n            })\n\n        }\n    }\n\n    useEffect(() => {\n        window.addEventListener(\"scroll\", progressHandler);\n        return () => window.removeEventListener('scroll', progressHandler)\n    }, [])\n\n    return <div className={styles.progress_scroll} ref={progressScrollRef}/>\n}"]},"metadata":{},"sourceType":"module"}